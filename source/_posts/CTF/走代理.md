---
title: 走代理
date: 2022-04-26 14:19:49
categories: CTF #try
tags: [Web]
---

这部分内容常用，所以做了一个系统整理；之后会陆续增加点其他内容

查看左边栏的目录进行快速跳转。

防火墙ban了大部分国外服务器的IP，可以轻易检测出没有伪装过的vmess流量，考虑效益，我购买了某机场的会员，价格为30元一个季度，每个月200GB流量。

![image-20220426160329651](走代理/image-20220426160329651.png)

我的真机系统为Win11，使用v2rayN管理连接的服务器和代理端口。

如图所示，我的socks代理端口为10808，http端口为10809。这两种端口，http端口使用的最为频繁。

- 设置v2rayNG->系统代理->清除系统代理；
- 设置v2rayNG->路由->PAC分流模式。

## 0.虚拟机走代理

百度都是直接关闭防火墙，这样不安全，所以写下这一部分内容记录一下步骤。

<!--more-->

1.虚拟机配置为NAT模式

2.查看虚拟机和主机IP

![image-20220426161922227](走代理/image-20220426161922227.png)

![image-20220426162040977](走代理/image-20220426162040977.png)

3.配置主机防火墙

![image-20220426161803259](走代理/image-20220426161803259.png)

输入10809，选择TCP协议其他的默认点击确定即可。

4.(可选)若是真机上有装杀毒软件，实测还需要开启杀毒软件的防火墙端口。

以Micafee为例，防火墙-->端口和系统服务-->填写`服务名：如代理`和`本地TCP/IP端口：10809`，点击确认。

5.现在可以通过配置虚拟机的系统代理，firefox安装插件，命令行走代理等多种途径使用主机的代理了。

还记得第一步查看到的真机IP吗，虚拟机的系统代理地址如下：

![image-20220426162715081](走代理/image-20220426162715081.png)

灵活的将[第2、3部分](# 2.pip走代理)结合在虚拟机中使用代理，例如git走代理

```
git config --global http.proxy "192.168.93.1:10809"  
git config --global https.proxy "192.168.93.1:10809"  
```

![image-20220426163307696](走代理/image-20220426163307696.png)

起飞！

## 1.浏览器走代理

1.安装omega插件，各个浏览器都有。

![image-20220426161337691](走代理/image-20220426161337691.png)

2.配置

![image-20220426161513927](走代理/image-20220426161513927.png)

3.选择

![image-20220426161601108](走代理/image-20220426161601108.png)

## 2.pip走代理

### 2.2 临时走代理

以下载xgboost这个库为例

```sh
pip3 --proxy 127.0.0.1:10809 install xgboost
```

### 2.3 [指定某个源安装]

#### 2.3.1临时

阿里云 ：http://mirrors.aliyun.com/pypi/simple/
中国科学技术大学：https://pypi.mirrors.ustc.edu.cn/simple/
清华大学：https://pypi.tuna.tsinghua.edu.cn/simple/
豆瓣：http://pypi.douban.com/simple/

```sh
pip3 install -i http://pypi.douban.com/simple/ xgboost --trusted-host pypi.douban.com
```

#### 2.3.2永久

```
notepad C:\Users\22154\pip\pip.ini
```
在该文件里写入下面的内容：

[global]
timeout = 6000
index-url = https://pypi.python.org/simple
trusted-host = pypi.python.org



## 3.git走代理

### 3.1 持久配置

```sh
git config --global http.proxy "127.0.0.1:10809"  
git config --global https.proxy "127.0.0.1:10809"  
```


### 3.2不用的时候取消代理

```sh
git config --global --unset http.proxy
git config --global --unset https.proxy
```




## 4.conda走代理



## 5.Rust cargo走代理

在 `C:\Users\用户名\.cargo` 下创建 `config` 文件
内容为

```
[http]
proxy = "127.0.0.1:10809"

[https]
proxy = "127.0.0.1:10809"
```





